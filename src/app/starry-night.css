:root {
  --hl-background-color: hsl(220, 25%, 94%);
  --hl-background-color-inline: hsl(220, 30%, 92%);
  --hl-border-color: hsl(215, 20%, 80%);
  --hl-outline-color: hsl(215, 20%, 65%, 0.5);
  --hl-line-highlight-background-color: hsl(220, 45%, 85%);
  --hl-line-added-background-color: hsla(103, 80%, 85%, 0.7);
  --hl-line-removed-background-color: hsla(4, 70%, 88%, 0.7);
  --hl-line-active-background-color: hsl(220, 40%, 83%);
  --hl-line-number-added-color: hsl(106, 65%, 25%);
  --hl-line-number-removed-color: hsl(355, 75%, 38%);

  /* Light theme - improved contrast */
  --hl-background-color: hsl(220, 25%, 94%);
  --hl-background-color-inline: hsl(220, 30%, 92%);
  --hl-border-color: hsl(215, 20%, 80%);
  --hl-outline-color: hsl(215, 20%, 65%, 0.5);
  --hl-line-highlight-background-color: hsl(220, 45%, 85%);
  --hl-line-added-background-color: hsla(103, 80%, 85%, 0.7);
  --hl-line-removed-background-color: hsla(4, 70%, 88%, 0.7);
  --hl-line-active-background-color: hsl(220, 40%, 83%);
  --hl-line-number-added-color: hsl(106, 65%, 25%);
  --hl-line-number-removed-color: hsl(355, 75%, 38%);

  /* Light theme syntax colors for better contrast */
  --color-prettylights-syntax-comment: hsl(220, 15%, 45%) !important;
  --color-prettylights-syntax-constant: hsl(260, 70%, 45%) !important;
  --color-prettylights-syntax-entity: hsl(280, 60%, 40%) !important;
  --color-prettylights-syntax-storage-modifier-import: hsl(220, 80%, 35%) !important;
  --color-prettylights-syntax-entity-tag: hsl(120, 60%, 35%) !important;
  --color-prettylights-syntax-keyword: hsl(340, 70%, 45%) !important;
  --color-prettylights-syntax-string: hsl(120, 50%, 35%) !important;
  --color-prettylights-syntax-variable: hsl(200, 80%, 35%) !important;
  --color-prettylights-syntax-brackethighlighter-unmatched: hsl(0, 70%, 50%) !important;
  --color-prettylights-syntax-invalid-illegal: hsl(0, 70%, 50%) !important;
  --color-prettylights-syntax-carriage-return: hsl(0, 70%, 50%) !important;
  --color-prettylights-syntax-string-regexp: hsl(30, 70%, 40%) !important;
  --color-prettylights-syntax-markup-list: hsl(220, 60%, 40%) !important;
  --color-prettylights-syntax-markup-heading: hsl(220, 80%, 35%) !important;
  --color-prettylights-syntax-markup-italic: hsl(220, 40%, 40%) !important;
  --color-prettylights-syntax-markup-bold: hsl(220, 40%, 40%) !important;
  --color-prettylights-syntax-markup-deleted: hsl(0, 60%, 45%) !important;
  --color-prettylights-syntax-markup-inserted: hsl(120, 60%, 35%) !important;
  --color-prettylights-syntax-markup-changed: hsl(30, 70%, 40%) !important;
  --color-prettylights-syntax-markup-ignored: hsl(220, 15%, 45%) !important;
  --color-prettylights-syntax-meta-diff-range: hsl(280, 60%, 40%) !important;
  --color-prettylights-syntax-brackethighlighter-angle: hsl(220, 15%, 45%) !important;
  --color-prettylights-syntax-sublimelinter-gutter-mark: hsl(220, 15%, 45%) !important;
  --color-prettylights-syntax-constant-other-reference-link: hsl(200, 80%, 35%) !important;
}

.dark {
  --hl-background-color: hsl(216, 20%, 8%);
  --hl-border-color: hsl(215, 15%, 25%);
  --hl-outline-color: hsl(215, 15%, 40%, 0.5);
  --hl-line-highlight-background-color: hsl(218, 25%, 18%);
  --hl-line-added-background-color: hsla(105, 50%, 15%, 0.8);
  --hl-line-removed-background-color: hsla(356, 60%, 25%, 0.8);
  --hl-line-active-background-color: hsl(218, 30%, 20%);
  --hl-line-number-added-color: hsl(105, 60%, 55%);
  --hl-line-number-removed-color: hsl(3, 80%, 70%);

  /* Dark theme syntax colors for better contrast */
  --color-prettylights-syntax-comment: hsl(220, 10%, 65%) !important;
  --color-prettylights-syntax-constant: hsl(260, 60%, 70%) !important;
  --color-prettylights-syntax-entity: hsl(280, 50%, 75%) !important;
  --color-prettylights-syntax-storage-modifier-import: hsl(220, 70%, 75%) !important;
  --color-prettylights-syntax-entity-tag: hsl(120, 50%, 70%) !important;
  --color-prettylights-syntax-keyword: hsl(340, 60%, 70%) !important;
  --color-prettylights-syntax-string: hsl(120, 40%, 70%) !important;
  --color-prettylights-syntax-variable: hsl(200, 70%, 75%) !important;
  --color-prettylights-syntax-brackethighlighter-unmatched: hsl(0, 70%, 70%) !important;
  --color-prettylights-syntax-invalid-illegal: hsl(0, 70%, 70%) !important;
  --color-prettylights-syntax-carriage-return: hsl(0, 70%, 70%) !important;
  --color-prettylights-syntax-string-regexp: hsl(30, 60%, 75%) !important;
  --color-prettylights-syntax-markup-list: hsl(220, 50%, 75%) !important;
  --color-prettylights-syntax-markup-heading: hsl(220, 70%, 80%) !important;
  --color-prettylights-syntax-markup-italic: hsl(220, 30%, 75%) !important;
  --color-prettylights-syntax-markup-bold: hsl(220, 30%, 75%) !important;
  --color-prettylights-syntax-markup-deleted: hsl(0, 50%, 70%) !important;
  --color-prettylights-syntax-markup-inserted: hsl(120, 50%, 70%) !important;
  --color-prettylights-syntax-markup-changed: hsl(30, 60%, 75%) !important;
  --color-prettylights-syntax-markup-ignored: hsl(220, 10%, 65%) !important;
  --color-prettylights-syntax-meta-diff-range: hsl(280, 50%, 75%) !important;
  --color-prettylights-syntax-brackethighlighter-angle: hsl(220, 10%, 65%) !important;
  --color-prettylights-syntax-sublimelinter-gutter-mark: hsl(220, 10%, 65%) !important;
  --color-prettylights-syntax-constant-other-reference-link: hsl(200, 70%, 75%) !important;
}

.hl {
  --hlFontFamilyMono: 'GeistMono', ui-monospace, SFMono-Regular, 'Roboto Mono', Menlo, Monaco, Consolas,
    'Liberation Mono', 'Courier New', monospace;
  --hlFontFamilyCode: var(--hl-font-mono, var(--hlFontFamilyMono));
  --hlBgColor: var(--hl-background-color, hsl(220, 25%, 94%));
  --hlBorderThickness: var(--hl-border-thickness, 1px);
  --hlBorderColor: var(--hl-border-color, hsl(215, 20%, 80%));
  --hlBorderRadius: var(--hl-border-radius, 12px);
  --hlBorderRadiusSm: calc(var(--hlBorderRadius) / 2);
  --hlOutlineThickness: var(--hl-outline-thickness, 5px);
  --hlOutlineColor: var(--hl-outline-color, hsl(215, 20%, 65%));
  --hlLineGap: var(--hl-line-gap, 1ex);
  --hlLineBorderWidth: var(--hl-line-border-width, 2px);
  --hlLineBorderColor: var(--hl-line-border-color, transparent);
  --hlLineNumberColor: var(--hl-line-number-color, hsl(220, 15%, 45%));
  --hlLineBgColor: transparent;
  --hlLineActiveBgColor: var(--hl-line-active-background-color, hsl(220, 40%, 83%));
  --hlLineHighlightBgColor: var(--hl-line-highlight-background-color, hsl(220, 45%, 85%));
  --hlLineAddedBgColor: var(--hl-line-added-background-color, hsla(103, 80%, 85%, 0.7));
  --hlLineRemovedBgColor: var(--hl-line-removed-background-color, hsla(4, 70%, 88%, 0.7));
  --hlLineNumberAddedColor: var(--hl-line-number-added-color, hsl(106, 65%, 25%));
  --hlLineNumberRemovedColor: var(--hl-line-number-removed-color, hsl(355, 75%, 38%));
  --hlLinePromptColor: var(--hl-line-prompt-color, hsl(357, 63%, 58%));
  --hlLinePromptSize: 1em;

  background-color: var(--hlBgColor);
  border: var(--hlBorderThickness) solid var(--hlBorderColor);
  border-radius: var(--hlBorderRadius);
  color: hsl(var(--foreground));
}

.hl-header {
  display: flex;
  align-items: center;
  gap: 1ch;
  padding: 0.75ch;
  border-bottom: 1px solid var(--hlBorderColor);
  font-size: 0.7em;
}

.hl-language {
  font-family: var(--hlFontFamilyCode);
  line-height: 1;
  padding: 0.75ch 1ch;
  border-radius: var(--hlBorderRadiusSm);
  background-color: var(--hlLineHighlightBgColor);
  color: hsl(var(--foreground));
  font-weight: 500;
}

.hl pre {
  background-color: transparent;
  border: none;
  overflow-x: auto;
  border-radius: inherit;
}

.hl pre:focus-within {
  outline-style: solid;
  outline-color: var(--hlOutlineColor);
  outline-width: var(--hlOutlineThickness);
}

.hl pre > code {
  display: grid;
  padding: var(--hlLineGap) 0;
  cursor: auto;
  touch-action: auto;
  white-space: pre;
}

.hl .line {
  --hlLinePaddingLeft: calc(var(--hl-line-marker-gutter-factor, 0) * 1.5ch + 1ch);
  --hlLineMarkerOffset: calc((var(--hlLinePaddingLeft) * -1) + 0.5ch);
  border-left: var(--hlLineBorderWidth) solid var(--hlLineBorderColor);
  padding-left: var(--hlLinePaddingLeft);
  padding-right: 1ch;
  background-color: var(--hlLineBgColor);
}

.hl .line[data-highlighted] {
  --hlLineNumberColor: var(--color-prettylights-syntax-comment);
  --hlLineBgColor: var(--hlLineHighlightBgColor);
  --hlLineBorderColor: var(--hlLineNumberColor);
}

.hl .line[data-line-added] {
  --hlLineNumberColor: var(--hlLineNumberAddedColor);
  --hlLineBgColor: var(--hlLineAddedBgColor);
  position: relative;
}

.hl .line[data-line-added]::before {
  content: '';
  mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' fill-rule='evenodd' clip-rule='evenodd' stroke='currentColor' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 12h12m-6-6v12'/%3E%3C/svg%3E");
  mask-repeat: no-repeat;
  mask-position: top center;
  mask-size: contain;
  display: inline-block;
  position: absolute;
  margin-left: var(--hlLineMarkerOffset);
  top: 0.5ch;
  text-decoration: none;
  user-select: none;
  background-color: var(--hlLineNumberColor);
  width: var(--hlLinePromptSize);
  height: var(--hlLinePromptSize);
  min-width: var(--hlLinePromptSize);
  min-height: var(--hlLinePromptSize);
}

.hl .line[data-line-removed] {
  --hlLineNumberColor: var(--hlLineNumberRemovedColor);
  --hlLineBgColor: var(--hlLineRemovedBgColor);
  position: relative;
}

.hl .line[data-line-removed]::before {
  content: '';
  mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' fill-rule='evenodd' clip-rule='evenodd' stroke='currentColor' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 12h12'/%3E%3C/svg%3E");
  mask-repeat: no-repeat;
  mask-position: top center;
  mask-size: contain;
  display: inline-block;
  position: absolute;
  margin-left: var(--hlLineMarkerOffset);
  top: 0.5ch;
  text-decoration: none;
  user-select: none;
  background-color: var(--hlLineNumberColor);
  width: var(--hlLinePromptSize);
  height: var(--hlLinePromptSize);
  min-width: var(--hlLinePromptSize);
  min-height: var(--hlLinePromptSize);
}

.hl .line[data-unselectable] {
  user-select: none;
}

.hl .line:focus:not(:focus-visible),
.hl .line:hover {
  --hlLineNumberColor: var(--color-prettylights-syntax-comment);
  --hlLineBgColor: var(--hlLineActiveBgColor);
}

.hl .line-number {
  --hlLineNumberWidth: calc(var(--hl-line-number-gutter-factor) * 1ch);
  display: inline-block;
  user-select: none;
  margin-right: 1em;
  text-align: right;
  color: var(--hlLineNumberColor);
  width: var(--hlLineNumberWidth);
}

.hl .line-prompt::before {
  content: '';
  mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' fill-rule='evenodd' clip-rule='evenodd' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M17.744 7.111a3.67 3.67 0 0 0-3.3-2.444H9.556a3.684 3.684 0 0 0-3.667 3.666A3.684 3.684 0 0 0 9.556 12h4.888a3.684 3.684 0 0 1 3.667 3.667 3.684 3.684 0 0 1-3.667 3.666H9.556a3.67 3.67 0 0 1-3.3-2.444M13 1l-2 22'/%3E%3C/svg%3E");
  mask-repeat: no-repeat;
  mask-position: top center;
  mask-size: contain;
  display: inline-block;
  margin-right: 0.5ch;
  margin-bottom: 0.3ex;
  vertical-align: middle;
  text-decoration: none;
  user-select: none;
  background-color: currentColor;
  color: var(--hlLinePromptColor);
  width: var(--hlLinePromptSize);
  height: var(--hlLinePromptSize);
  min-width: var(--hlLinePromptSize);
  min-height: var(--hlLinePromptSize);
}

code.hl-inline {
  --hlBgInline: var(--hl-background-color-inline, hsl(220, 30%, 92%));
  font-family: var(--hl-font-mono);
  background-color: var(--hlBgInline);
  padding-left: 0.5ch;
  padding-right: 0.5ch;
  font-size: 0.95em;
  border-radius: 0.5ch;
}

.dark code.hl-inline {
  --hlBgInline: hsl(216, 25%, 12%);
}

.dark .hl {
  --hlLineNumberColor: hsl(220, 10%, 65%);
}
